/*! Regex Colorizer v0.3.1
 * (c) 2010-2012 Steven Levithan <http://stevenlevithan.com/regex/colorizer/>
 * MIT license
 */
var RegexColorizer=function(){"use strict";var self={},regexToken=/\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g,charClassToken=/[^\\-]+|-|\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)/g,charClassParts=/^(\[\^?)(]?(?:[^\\\]]+|\\[\S\s]?)*)(]?)$/,quantifier=/^(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??$/,type_NONE=0,type_RANGE_HYPHEN=1,type_SHORT_CLASS=2,type_ALTERNATOR=3,error_UNCLOSED_CLASS="Unclosed character class",error_INCOMPLETE_TOKEN="Incomplete regex token",error_INVALID_RANGE="Reversed or invalid range",error_INVALID_GROUP_TYPE="Invalid or unsupported group type",error_UNBALANCED_LEFT_PAREN="Unclosed grouping",error_UNBALANCED_RIGHT_PAREN="No matching opening parenthesis",error_INTERVAL_OVERFLOW="Interval quantifier cannot use value over 65,535",error_INTERVAL_REVERSED="Interval quantifier range is reversed",error_UNQUANTIFIABLE="Quantifiers must be preceded by a token that can be repeated",error_IMPROPER_EMPTY_ALTERNATIVE="Empty alternative effectively truncates the regex here";function errorize(str,desc){return'<b class="err"'+(desc?' title="'+desc+'"':"")+">"+str+"</b>"}function groupize(str,depth){return'<b class="g'+depth+'">'+str+"</b>"}function expandHtmlEntities(str){return str.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function elsByClass(cls){if(document.getElementsByClassName)return document.body.getElementsByClassName(cls);var els=document.body.getElementsByTagName("*"),regex=new RegExp("(?:^|\\s)"+cls+"(?:\\s|$)"),result=[],len=els.length,i;for(i=0;i<len;i++)regex.test(els[i].className)&&result.push(els[i]);return result}function getTokenCharCode(token){if(token.length>1&&"\\"===token.charAt(0)){var t=token.slice(1);if(/^c[A-Za-z]$/.test(t))return"ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(t.charAt(1).toUpperCase())+1;if(/^(?:x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4})$/.test(t))return parseInt(t.slice(1),16);if(/^(?:[0-3][0-7]{0,2}|[4-7][0-7]?)$/.test(t))return parseInt(t,8);if(1===t.length&&"cuxDdSsWw".indexOf(t)>-1)return NaN;if(1===t.length)switch(t){case"b":return 8;case"f":return 12;case"n":return 10;case"r":return 13;case"t":return 9;case"v":return 11;default:return t.charCodeAt(0)}}return"\\"!==token?token.charCodeAt(0):NaN}function parseCharClass(value){var output="",parts=charClassParts.exec(value),lastToken={rangeable:!1,type:type_NONE},match,m;for(output+=(parts={opening:parts[1],content:parts[2],closing:parts[3]}).closing?parts.opening:errorize(parts.opening,error_UNCLOSED_CLASS);match=charClassToken.exec(parts.content);)if("\\"===(m=match[0]).charAt(0))/^\\[cux]$/.test(m)?(output+=errorize(m,error_INCOMPLETE_TOKEN),lastToken={rangeable:lastToken.type!==type_RANGE_HYPHEN}):/^\\[dsw]$/i.test(m)?(output+="<b>"+m+"</b>",lastToken={rangeable:lastToken.type!==type_RANGE_HYPHEN,type:type_SHORT_CLASS}):"\\"===m?output+=errorize(m,error_INCOMPLETE_TOKEN):(output+="<b>"+expandHtmlEntities(m)+"</b>",lastToken={rangeable:lastToken.type!==type_RANGE_HYPHEN,charCode:getTokenCharCode(m)});else if("-"===m)if(lastToken.rangeable){var lastIndex=charClassToken.lastIndex,nextToken=charClassToken.exec(parts.content);if(nextToken){var nextTokenCharCode=getTokenCharCode(nextToken[0]);!isNaN(nextTokenCharCode)&&lastToken.charCode>nextTokenCharCode||lastToken.type===type_SHORT_CLASS||/^\\[dsw]$/i.test(nextToken[0])?output+=errorize("-",error_INVALID_RANGE):output+="<u>-</u>",lastToken={rangeable:!1,type:type_RANGE_HYPHEN}}else parts.closing?output+="-":output+="<u>-</u>";charClassToken.lastIndex=lastIndex}else output+="-",lastToken={rangeable:lastToken.type!==type_RANGE_HYPHEN};else output+=expandHtmlEntities(m),lastToken={rangeable:m.length>1||lastToken.type!==type_RANGE_HYPHEN,charCode:m.charCodeAt(m.length-1)};return output+parts.closing}return self.colorizeText=function(pattern){for(var output="",capturingGroupCount=0,groupStyleDepth=0,openGroups=[],lastToken={quantifiable:!1,type:type_NONE},match,m,char0,char1;match=regexToken.exec(pattern);)if(char0=(m=match[0]).charAt(0),char1=m.charAt(1),"["===char0)output+="<i>"+parseCharClass(m)+"</i>",lastToken={quantifiable:!0};else if("("===char0)2===m.length?output+=errorize(m,error_INVALID_GROUP_TYPE):(1===m.length&&capturingGroupCount++,groupStyleDepth=5===groupStyleDepth?1:groupStyleDepth+1,openGroups.push({index:output.length+'<b class="gN">'.length,opening:m}),output+=groupize(m,groupStyleDepth)),lastToken={quantifiable:!1};else if(")"===char0)openGroups.length?(output+=groupize(")",groupStyleDepth),lastToken={quantifiable:!/^[=!]/.test(openGroups[openGroups.length-1].opening.charAt(2)),style:"g"+groupStyleDepth},groupStyleDepth=1===groupStyleDepth?5:groupStyleDepth-1,openGroups.pop()):(output+=errorize(")",error_UNBALANCED_RIGHT_PAREN),lastToken={quantifiable:!1});else if("\\"===char0)if(/^[1-9]/.test(char1)){for(var nonBackrefDigits="",num=+m.slice(1);num>capturingGroupCount;)nonBackrefDigits=/[0-9]$/.exec(num)[0]+nonBackrefDigits,num=Math.floor(num/10);if(num>0)output+="<b>\\"+num+"</b>"+nonBackrefDigits;else{var parts=/^\\([0-3][0-7]{0,2}|[4-7][0-7]?|[89])([0-9]*)/.exec(m);output+="<b>\\"+parts[1]+"</b>"+parts[2]}lastToken={quantifiable:!0}}else/^[0bBcdDfnrsStuvwWx]/.test(char1)?/^\\[cux]$/.test(m)?(output+=errorize(m,error_INCOMPLETE_TOKEN),lastToken={quantifiable:!1}):"bB".indexOf(char1)>-1?(output+="<b>"+m+"</b>",lastToken={quantifiable:!1}):(output+="<b>"+m+"</b>",lastToken={quantifiable:!0}):"\\"===m?output+=errorize(m,error_INCOMPLETE_TOKEN):(output+=expandHtmlEntities(m),lastToken={quantifiable:!0});else if(quantifier.test(m)){if(lastToken.quantifiable){var interval=/^\{([0-9]+)(?:,([0-9]*))?/.exec(m);interval&&(+interval[1]>65535||interval[2]&&+interval[2]>65535)?output+=errorize(m,error_INTERVAL_OVERFLOW):interval&&interval[2]&&+interval[1]>+interval[2]?output+=errorize(m,error_INTERVAL_REVERSED):output+=(lastToken.style?'<b class="'+lastToken.style+'">':"<b>")+m+"</b>"}else output+=errorize(m,error_UNQUANTIFIABLE);lastToken={quantifiable:!1}}else"|"===m?(lastToken.type===type_NONE||lastToken.type===type_ALTERNATOR&&!openGroups.length?output+=errorize(m,error_IMPROPER_EMPTY_ALTERNATIVE):output+=openGroups.length?groupize("|",groupStyleDepth):"<b>|</b>",lastToken={quantifiable:!1,type:type_ALTERNATOR}):"^"===m||"$"===m?(output+="<b>"+m+"</b>",lastToken={quantifiable:!1}):"."===m?(output+="<b>.</b>",lastToken={quantifiable:!0}):(output+=expandHtmlEntities(m),lastToken={quantifiable:!0});var numCharsAdded=0,errorIndex,i;for(i=0;i<openGroups.length;i++)errorIndex=openGroups[i].index+numCharsAdded,output=output.slice(0,errorIndex)+errorize(openGroups[i].opening,error_UNBALANCED_LEFT_PAREN)+output.slice(errorIndex+openGroups[i].opening.length),numCharsAdded+=errorize("",error_UNBALANCED_LEFT_PAREN).length;return output},self.colorizeAll=function(cls){var els=elsByClass(cls=cls||"regex"),len=els.length,el,i;for(i=0;i<len;i++)(el=els[i]).innerHTML=self.colorizeText(el.textContent||el.innerText)},self.addStyleSheet=function(){var ss=document.createElement("style"),rules=".regex       {font-family: Monospace;} .regex b     {background: #aad1f7;} .regex i     {background: #e3e3e3;} .regex i b   {background: #9fb6dc;} .regex i u   {background: #c3c3c3;} .regex b.g1  {background: #b4fa50; color: #000;} .regex b.g2  {background: #8cd400; color: #000;} .regex b.g3  {background: #26b809; color: #fff;} .regex b.g4  {background: #30ea60; color: #000;} .regex b.g5  {background: #0c8d15; color: #fff;} .regex b.err {background: #e30000; color: #fff;} .regex b, .regex i, .regex u {font-weight: normal; font-style: normal; text-decoration: none;}";ss.id="regex-colorizer-ss",document.getElementsByTagName("head")[0].appendChild(ss),ss.styleSheet?ss.styleSheet.cssText=rules:ss.innerHTML=rules},self}();